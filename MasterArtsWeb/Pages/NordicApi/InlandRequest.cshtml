@page
@model MasterArtsWeb.Pages.NordicApi.InlandRequestModel
@{
}

<div class="text-center">
    <h3 class="contact adjusted-anchor-2" id="contact-id">
        LCL-INLAND
    </h3>
</div>
<div class="language-toggle text-end index-lang">
    <button id="languageToggleBtn" class="l-btn" onclick="toggleLanguage()">Svenska</button>
</div>
<div class="ban">
    <a href="/LogisticsCenter/ShipmentCalculator#contact-id" class="cta-button">Back</a>
</div>
<div class="text-center shipping-cost-calculator">
    <h3 id="resultSection"></h3>

    @if (Model.ApiResponseInland != null)
    {
        <div>
            <p>Total: @Model.ApiResponseInland.total</p>
            <p>USD Exchange Rate: @Model.ApiResponseInland.usdExchangeRate</p>
            <p>EUR Exchange Rate: @Model.ApiResponseInland.eurExchangeRate</p>
            <p>Currency: @Model.ApiResponseInland.currency</p>
            <p>Fuel Surcharge: @Model.ApiResponseInland.fuelSurcharge</p>
            <p>Fuel Surcharge Percentage: @Model.ApiResponseInland.fuelSurchargePercentage</p>
            <p>CO2: @Model.ApiResponseInland.co2</p>
            <p>Zip Code: @Model.ApiResponseInland.zipCode</p>
            <p>City: @Model.ApiResponseInland.city</p>
        </div>


    }
</div>


<form method="post" id="contactForm" style="margin-top:50px">
    <div class="form-container-2">
    <div>
        <label asp-for="@Model.Inland.Module">Transport Module</label>
            <select asp-for="@Model.Inland.Module">
            <option value="ocean">Ocean</option>
            <option value="rail">Rail</option>
            <!-- Lägg till fler transportmoduler här -->
        </select>
    </div>
    <div>

           

        <div>
                <label asp-for="@Model.Inland.InlandZipCode">Inland Zip Code</label>
                <input asp-for="@Model.Inland.InlandZipCode" />
        </div>
        <div>
                <label asp-for="@Model.Inland.Weight">Weight</label>
                <input asp-for="@Model.Inland.Weight" type="number" />
        </div>
            <div>
                <label asp-for="@Model.Inland.Volume">Volume (m³)</label>
                <input asp-for="@Model.Inland.Volume" type="number" step="0.01" />
            </div>


        <div>
                <label asp-for="@Model.Inland.Date">Date</label>
                <input asp-for="@Model.Inland.Date" type="date" />
        </div>
            <label asp-for="@Model.Inland.ImportExport">Import/Export</label>
            <select asp-for="@Model.Inland.ImportExport">
            <option value="import">Import</option>
            <option value="export">Export</option>
        </select>
    </div>
        
            
            <!-- Displaying "LCL" as a text to the user, assuming "LCL" is the only option needed. -->
            
            <!-- Hidden input to ensure "LCL" is submitted as the value -->

        <input type="hidden" asp-for="@Model.Inland.Type" value="lcl" />
        <input type="hidden" asp-for="@Model.Inland.UserSelection" value="inlandtransport" />

          

        <div>
            <label asp-for="@Model.Inland.City">City</label>
            <input asp-for="@Model.Inland.City" />
        </div>
        
        
    <!-- Fyll i fler fält enligt ovanstående mönster -->
    <div>
            <label asp-for="@Model.Inland.Packages">Number Of Packages"</label>
            <input type="number" asp-for="@Model.Inland.Packages" />
    </div>
    <div>
        

    </div>
    </div>

        <div class="form-container-2">
    <h4>Dimensioner</h4>

        <div id="dimensionsContainerEn">
        <div>
                <label asp-for="Inland.Dimensions[0].Pcs">Number Of Package</label>
                <input asp-for="Inland.Dimensions[0].Pcs" type="number" />
        </div>
        <div>
                <label asp-for="Inland.Dimensions[0].Length">Lenght</label>
                <input asp-for="Inland.Dimensions[0].Length" type="number" />
        </div>
        <div>
                <label asp-for="Inland.Dimensions[0].Width">Width</label>
                <input asp-for="Inland.Dimensions[0].Width" type="number" />
        </div>
        <div>
                <label asp-for="Inland.Dimensions[0].Height">Hight</label>
                <input asp-for="Inland.Dimensions[0].Height" type="number" />
        </div>
        <div>
                <label asp-for="Inland.Dimensions[0].Weight">Weight</label>
                <input asp-for="Inland.Dimensions[0].Weight" type="number" />
        </div>
        <div>
                <label asp-for="Inland.Dimensions[0].Stackable">Stackable</label>
                <select asp-for="Inland.Dimensions[0].Stackable">
                <option value="true">Yes</option>
                <option value="false">No</option>
            </select>
        </div>
    </div>

        <button type="button" onclick="addDimension()">Lägg till Dimension</button>

    <br>
    
    </div>
    <div class="sleep">
        <div id="loadingSpinner" style="display: none;">
            <div class="spinner"></div>
        </div>

        <button id="loginButton" onclick="startLoginProcess()" type="submit" class="btn-large text-center" style="margin-top:20px" name="OrderSubmitButton">Calculate</button>
    </div>
</form>


<form method="post" id="contactFormSv" style="margin-top:50px;display:none">
    <div class="form-container-2">
        <div>
            <label asp-for="@Model.ShippingRequest.Module">Transportmodul</label>
            <select asp-for="@Model.ShippingRequest.Module">
                <option value="ocean">Ocean</option>
                <option value="rail">Rail</option>
                <!-- Lägg till fler transportmoduler här -->
            </select>
        </div>
        <div>

            
            <div>
                <label asp-for="@Model.ShippingRequest.Weight">Vikt</label>
                <input asp-for="@Model.ShippingRequest.Weight" type="number" />
            </div>
            <div>
                <label asp-for="@Model.ShippingRequest.Volume">Volym (m³)</label>
                <input asp-for="@Model.ShippingRequest.Volume" type="number" step="0.01" />
            </div>


            <div>
                <label asp-for="@Model.ShippingRequest.Date">Datum (YYYY-MM-DD)</label>
                <input asp-for="@Model.ShippingRequest.Date" type="date" />
            </div>
            <label asp-for="@Model.ShippingRequest.ImportExport">Import/Export</label>
            <select asp-for="@Model.ShippingRequest.ImportExport">
                <option value="import">Import</option>
                <option value="export">Export</option>
            </select>
        </div>
        <div>
            
            <!-- Displaying "LCL" as a text to the user, assuming "LCL" is the only option needed. -->
            
            <!-- Hidden input to ensure "LCL" is submitted as the value -->
            <input type="hidden" asp-for="@Model.ShippingRequest.Type" value="lcl" />
        </div>

        

        <!-- Fyll i fler fält enligt ovanstående mönster -->
        <div>
            <label asp-for="@Model.ShippingRequest.Packages">Antal paket</label>
            <input type="number" asp-for="@Model.ShippingRequest.Packages" />
        </div>
        <div>
           

        </div>
    </div>

    <div class="form-container-2">
        <h4>Dimensioner</h4>

        <div id="dimensionsContainerSv">
            <div>
                <label asp-for="ShippingRequest.Dimensions[0].Pcs">Antal stycken</label>
                <input asp-for="ShippingRequest.Dimensions[0].Pcs" type="number" />
            </div>
            <div>
                <label asp-for="ShippingRequest.Dimensions[0].Length">Längd</label>
                <input asp-for="ShippingRequest.Dimensions[0].Length" type="number" />
            </div>
            <div>
                <label asp-for="ShippingRequest.Dimensions[0].Width">Bredd</label>
                <input asp-for="ShippingRequest.Dimensions[0].Width" type="number" />
            </div>
            <div>
                <label asp-for="ShippingRequest.Dimensions[0].Height">Höjd</label>
                <input asp-for="ShippingRequest.Dimensions[0].Height" type="number" />
            </div>
            <div>
                <label asp-for="ShippingRequest.Dimensions[0].Weight">Vikt</label>
                <input asp-for="ShippingRequest.Dimensions[0].Weight" type="number" />
            </div>
            <div>
                <label asp-for="ShippingRequest.Dimensions[0].Stackable">Stackbar</label>
                <select asp-for="ShippingRequest.Dimensions[0].Stackable">
                    <option value="true">Ja</option>
                    <option value="false">Nej</option>
                </select>
            </div>
        </div>


        <button type="button" onclick="addDimension()">Lägg till Dimension</button>

        <br>

    </div>
    <div class="sleep">
        <div id="loadingSpinner" style="display: none;">
            <div class="spinner"></div>
        </div>

        <button id="loginButton" onclick="startLoginProcess()" type="submit" class="btn-large text-center" style="margin-top:20px" name="OrderSubmitButton">Calculate</button>
    </div>
</form>





@section Scripts {
    <script>
        function startLoginProcess() {
            document.getElementById('loadingSpinner').style.display = 'block';
            document.getElementById('loadingSpinner2').style.display = 'block';
            // Antag att `login` är funktionen som hanterar inloggningsprocessen.
            login().then(() => {
                document.getElementById('loadingSpinner').style.display = 'none';
            });
        }

        window.onload = function () {
            var resultSection = document.getElementById('resultSection');
            if (resultSection) {
                resultSection.scrollIntoView({ behavior: 'smooth' });
            }
        };

        function toggleLanguage() {
            var toggleBtn = document.getElementById('languageToggleBtn');
            var contactForm = document.getElementById('contactForm');
            var contactFormSv = document.getElementById('contactFormSv');

            if (toggleBtn.innerText === 'Svenska') {
                toggleBtn.innerText = 'English';
                contactForm.style.display = 'none';
                contactFormSv.style.display = 'block';
            } else {
                toggleBtn.innerText = 'Svenska';
                contactForm.style.display = 'block';
                contactFormSv.style.display = 'none';
            }
        }
        var dimensionIndex = 0;
        function addOption() {
            var container = document.getElementById('optionsContainer');
            var optionHTML = `
                <div id="option-${optionIndex}">
                    <select name="ShippingRequest.Options[${optionIndex}].Key">
                        <option value="vgm">VGM</option>
                        <option value="incoterms">Incoterms</option>
                        <!-- Lägg till fler fördefinierade nycklar här -->
                    </select>
                    <select name="ShippingRequest.Options[${optionIndex}].Value">
                        <option value="true">True</option>
                        <option value="false">False</option>
                        <!-- Specifika värden för Incoterms, exempelvis -->
                        <option value="dap">DAP</option>
                        <option value="exw">EXW</option>
                        <option value="fob">FOB</option>
                    </select>
                    <button type="button" onclick="removeOption(${optionIndex})">Ta bort</button>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', optionHTML);
            optionIndex++;
        }




        function addDimension() {
            var language = document.getElementById('languageToggleBtn').innerText;
            var isSwedish = language.includes('Svenska');

            var containerId = isSwedish ? 'dimensionsContainerEn' : 'dimensionsContainerSv';
            var container = document.getElementById(containerId);

            var placeholders = isSwedish ? {

                pcs: "Number of pieces",
                length: "Length",
                width: "Width",
                height: "Height",
                weight: "Weight",
                yes: "Yes",
                no: "No",
                removeBtn: "Remove"
                
                
            } : {
                pcs: "Antal stycken",
                length: "Längd",
                width: "Bredd",
                height: "Höjd",
                weight: "Vikt",
                yes: "Ja",
                no: "Nej",
                removeBtn: "Ta bort"
            };

            var dimensionHTML = `
                <div id="dimension-${dimensionIndex}">
                    <input type="number" name="ShippingRequest.Dimensions[${dimensionIndex}].Pcs" placeholder="${placeholders.pcs}" />
                    <input type="number" name="ShippingRequest.Dimensions[${dimensionIndex}].Length" placeholder="${placeholders.length}" />
                    <input type="number" name="ShippingRequest.Dimensions[${dimensionIndex}].Width" placeholder="${placeholders.width}" />
                    <input type="number" name="ShippingRequest.Dimensions[${dimensionIndex}].Height" placeholder="${placeholders.height}" />
                    <input type="number" name="ShippingRequest.Dimensions[${dimensionIndex}].Weight" placeholder="${placeholders.weight}" />
                    <select name="ShippingRequest.Dimensions[${dimensionIndex}].Stackable">
                        <option value="true">${placeholders.yes}</option>
                        <option value="false">${placeholders.no}</option>
                    </select>
                    <button type="button" onclick="removeDimension(${dimensionIndex})">${placeholders.removeBtn}</button>
                </div>
            `;

            container.insertAdjacentHTML('beforeend', dimensionHTML);
            dimensionIndex++;
        }




        function removeDimension(index) {
            var elementToRemove = document.getElementById(`dimension-${index}`);
            if (elementToRemove) {
                elementToRemove.remove();
            }
        }
    </script>
}